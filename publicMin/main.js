function resizeCanvas(){var t=window.innerWidth,e=window.innerHeight;canvas.width=Math.floor(t*ratio),canvas.height=Math.floor(e*ratio),canvas.style.width=canvas.width/ratio+"px",canvas.style.height=canvas.height/ratio+"px"}function setRatio(t){ratio=t,resizeCanvas(),tiles=createTiles(size*ratio)}function draw(){ctx.clearRect(0,0,canvas.width,canvas.height),game.update(Date.now()-pastTime),pastTime=Date.now(),game.draw(),requestAnimationFrame(draw)}var canvas=document.getElementById("gameCanvas"),ctx=canvas.getContext("2d"),ratio=1,tiles,size=32,alignImage=!1;if(Math.min(window.innerWidth,window.innerHeight)<512)var size=32;else var size=64;var pastTime=0,game;setRatio(1),game=makeNewPopperGame(Math.floor(window.innerWidth/size),Math.floor(window.innerHeight/size),size),pastTime=Date.now(),draw(),canvas.onmousedown=function(t){console.log(t),game.click(t.x,t.y)},canvas.addEventListener("touchstart",function(t){var e=event.targetTouches[0];return game.click(e.pageX,e.pageY),cancelEvent(t)},!1);